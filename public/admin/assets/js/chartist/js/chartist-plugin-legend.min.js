!function(e,t){"function"==typeof define&&define.amd?define(["chartist"],function(a){return e.returnExportsGlobal=t(a)}):"object"==typeof exports?module.exports=t(require("chartist")):e["Chartist.plugins.legend"]=t(e.Chartist)}(this,function(e){"use strict";var t={className:"",classNames:!1,removeAll:!1,legendNames:!1,clickable:!0,onClick:null,position:"top"};return e.plugins=e.plugins||{},e.plugins.legend=function(a){if(a&&a.position){if(!("top"===a.position||"bottom"===a.position||a.position instanceof HTMLElement))throw Error("The position you entered is not a valid position");if(a.position instanceof HTMLElement){var s=a.position;delete a.position}}return a=e.extend({},t,a),s&&(a.position=s),function(t){var s=t.container.querySelector(".ct-legend");if(s&&s.parentNode.removeChild(s),a.clickable){var i=t.data.series.map(function(a,s){return"object"!=typeof a&&(a={value:a}),a.className=a.className||t.options.classNames.series+"-"+e.alphaNumerate(s),a});t.data.series=i}var n=document.createElement("ul"),l=t instanceof e.Pie;n.className="ct-legend",t instanceof e.Pie&&n.classList.add("ct-legend-inside"),"string"==typeof a.className&&a.className.length>0&&n.classList.add(a.className),t.options.width&&(n.style.cssText="width: "+t.options.width+"px;margin: 0 auto;");var o=t.data.series,r=l&&t.data.labels;if(r){t.data.labels.slice(0);o=t.data.labels}o=a.legendNames||o;for(var c=[],d=new Array(t.data.series.length),p=0,u=0;u<t.data.series.length;u++)d[u]={data:t.data.series[u],label:r?t.data.labels[u]:null,legend:-1};var f=Array.isArray(a.classNames)&&a.classNames.length===o.length;o.forEach(function(e,t){var s=e.name||e,i=e.series||[t],l=document.createElement("li");l.className="ct-series-"+t,f&&(l.className+=" "+a.classNames[t]),l.setAttribute("data-legend",t),l.textContent=s,n.appendChild(l),i.forEach(function(e){d[e].legend=t}),c.push({text:s,series:i,active:!0}),p++}),t.on("created",function(e){if(a.position instanceof HTMLElement)a.position.insertBefore(n,null);else switch(a.position){case"top":t.container.insertBefore(n,t.container.childNodes[0]);break;case"bottom":t.container.insertBefore(n,null)}}),a.clickable&&n.addEventListener("click",function(e){var s=e.target;if(s.parentNode===n&&s.hasAttribute("data-legend")){e.preventDefault();var i=parseInt(s.getAttribute("data-legend")),l=c[i];if(c[i].active){if(l.active=!1,p--,s.classList.add("inactive"),!a.removeAll&&0==p)for(var o=0;o<c.length;o++)c[o].active=!0,p++,n.childNodes[o].classList.remove("inactive")}else l.active=!0,p++,s.classList.remove("inactive");var u=[],f=[];for(o=0;o<d.length;o++)-1!=d[o].legend&&c[d[o].legend].active&&(u.push(d[o].data),f.push(d[o].label));t.data.series=u,r&&(t.data.labels=f),t.update(),a.onClick&&a.onClick(t,e)}})}},e.plugins.legend});